<h2> Match Stats (<a href="noob" id="matchStats">Download Full Match Stats</a>) </h2>

<div>
    <h3><u>Red Team</u></h3>
    <p>
        <label>Name: </label>
        <span id="redName"></span>
    </p>
    <p>
        <label>Wins: </label>
        <span id="redWins"></span>
    </p>
    <p>
        <label>Ties: </label>
        <span id="redTies"></span>
    </p>
    <p>
        <label>Losses: </label>
        <span id="redLosses"></span>
    </p>
    <p>
        <label>Crashes: </label>
        <span id="redCrashes"></span>
    </p>
    <p>
        <label>Timeouts: </label>
        <span id="redTimeouts"></span>
    </p>
</div>
<div>
    <h3><u>Blue Team</u></h3>
    <p>
        <label>Name: </label>
        <span id="blueName"></span>
    </p>
    <p>
        <label>Wins: </label>
        <span id="blueWins"></span>
    </p>
    <p>
        <label>Ties: </label>
        <span id="blueTies"></span>
    </p>
    <p>
        <label>Losses: </label>
        <span id="blueLosses"></span>
    </p>
    <p>
        <label>Crashes: </label>
        <span id="blueCrashes"></span>
    </p>
    <p>
        <label>Timeouts: </label>
        <span id="blueTimeouts"></span>
    </p>
</div>

<script>
    var title = "{{ .Page.Params.title }}".slice(23) //remove "Capture The Flag Match "
    var date = title.slice(0,8)
    console.log(date)
    var matchstats = "/" + date + "/" + "/matches/" + title + "/" + title + "_matchstats.json"
    fetch(matchstats)
        .then(response => response.json())
        .then(data => {
            console.log(data);
            populateRed(data.red);
            populateBlue(data.blue);
        })
        .catch(error => console.error('Error fetching data.json:', error));

        function populateRed(stats) {
            const redName = document.getElementById('redName');
            redName.textContent = stats.name;
            const redWins = document.getElementById('redWins');
            redWins.textContent = stats.wins;
            const redTies = document.getElementById('redTies');
            redTies.textContent = stats.ties;
            const redLosses = document.getElementById('redLosses');
            redLosses.textContent = stats.losses;
            const redCrashes = document.getElementById('redCrashes');
            redCrashes.textContent = stats.crashes;
            const redTimeouts = document.getElementById('redTimeouts');
            redTimeouts.textContent = stats.timeouts;
        }

        function populateBlue(stats) {
            const blueName = document.getElementById('blueName');
            blueName.textContent = stats.name;
            const blueWins = document.getElementById('blueWins');
            blueWins.textContent = stats.wins;
            const blueTies = document.getElementById('blueTies');
            blueTies.textContent = stats.ties;
            const blueLosses = document.getElementById('blueLosses');
            blueLosses.textContent = stats.losses;
            const blueCrashes = document.getElementById('blueCrashes');
            blueCrashes.textContent = stats.crashes;
            const blueTimeouts = document.getElementById('blueTimeouts');
            blueTimeouts.textContent = stats.timeouts;
        }

</script>
